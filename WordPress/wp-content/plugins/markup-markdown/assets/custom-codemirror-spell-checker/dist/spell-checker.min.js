!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).CustomCodeMirrorSpellChecker=e()}(function(){return function r(i,o,s){function a(t,e){if(!o[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}n=o[t]={exports:{}},i[t][0].call(n.exports,function(e){return a(i[t][1][e]||e)},n,n.exports,r,i,o,s)}return o[t].exports}for(var l="function"==typeof require&&require,e=0;e<s.length;e++)a(s[e]);return a}({1:[function(e,t,n){var i=e("typo-js"),o={completed:-1,typo:{},langs:[],lang:""};function r(e){return!(0<=o.completed||(o.completed=0,this.data={aff:{},dic:{}},this.urls={aff:[],dic:[],etr:[]},this.num_loaded=0,this.loading=-1,this.shortLang="",!this.geti18nSettings(e||!1)))&&(this.myXHR=null,this.myExtra="",this.loading=0,void this.retrieveData("etr"))}function s(n){if(n=n||{},o.completed<0)return new r(n);"function"!=typeof n.codeMirrorInstance||"function"!=typeof n.codeMirrorInstance.defineMode?console.log("CodeMirror Spell Checker: You must provide an instance of CodeMirror via the option `codeMirrorInstance`"):(String.prototype.includes||(String.prototype.includes=function(){return-1!==String.prototype.indexOf.apply(this,arguments)}),n.codeMirrorInstance.defineMode("spell-checker",function(e){var r="!\"#$%&()*+,-—./:;<=>?@[\\]^_`’“”'{|}~ ",i=0,t={token:function(e){var t=e.peek(),n="";if(r.includes(t)||""===t||""===t)e.next();else{for(;null!=(t=e.peek())&&!r.includes(t);)n+=t,e.next();if(!/^\p{Extended_Pictographic}$/u.test(n))if("span"===n)i=3===i?(o.lang=o.langs[0],0):1;else if("lang"===n)i=2;else if(2===i)i=3,-1!==o.langs.indexOf(n)&&(o.lang=n);else if(o.typo[o.lang]&&!o.typo[o.lang].check(n))return"spell-error "+o.lang}return null}},e=n.codeMirrorInstance.getMode(e,e.backdrop||"text/plain");return n.codeMirrorInstance.overlayMode(e,t,!0)}),document.dispatchEvent(new Event("CodeMirrorSpellCheckerReady")))}r.prototype.geti18nSettings=function(e){var t=this;if(e){if("string"==typeof e)return!1;if(e.aff&&e.dic)return t.urls.aff.push(e.aff),t.urls.dic.push(e.dic),t.urls.etr.push(e.etr||""),e.code?(t.shortLang=e.code.replace(/_.*/,""),o.langs.push(t.shortLang),o.lang=t.shortLang):(o.langs.push("def"),o.lang="def"),!0;var n,r=!0;for(n in e)e.hasOwnProperty(n)&&(r=!1,t.shortLang=e[n].code.replace(/_.*/,""),e[n].aff)&&e[n].dic&&(t.urls.aff.push(e[n].aff),t.urls.dic.push(e[n].dic),t.urls.etr.push(e[n].etr||""),o.langs.push(t.shortLang),o.lang&&o.lang.length||(o.lang=t.shortLang));return!r}return!1},r.prototype.loadData=function(){var e,t=this;if(t.num_loaded++,1===t.num_loaded)t.myExtra={},t.myXHR&&t.myXHR.responseText&&t.myXHR.responseText.length&&(t.myExtra=t.myXHR.responseText.split(/\n/)),t.myXHR=null,setTimeout(function(){t.retrieveData("dic")},50);else if(2===t.num_loaded){if(t.data.dic=t.myXHR.responseText,t.myXHR=null,t.myExtra&&t.myExtra.length){for(var n=0,r=t.myExtra;n<r.length;n++)r[n]&&r[n].length&&(t.data.dic+="\n"+r[n]);t.myExtra={}}setTimeout(function(){t.retrieveData("aff")},50)}else 3===t.num_loaded&&(t.data.aff=t.myXHR.responseText,t.myXHR=null,e=o.langs[t.loading],o.typo[e]=new i(e,t.data.aff,t.data.dic,{platform:"any"}),t.data.aff=null,t.data.dic=null,t.loading<o.langs.length-1?(t.loading++,t.num_loaded=0,setTimeout(function(){t.retrieveData("etr")},50)):(o.completed=1,setTimeout(function(){document.dispatchEvent(new Event("CodeMirrorDictionariesReady"))},50)))},r.prototype.requestCallBack=function(){var e=this;4===e.myXHR.readyState&&200===e.myXHR.status?e.loadData():4===myXHR.readyState&&200!==myXHR.status&&(e.num_loaded++,window.console&&window.console.log&&window.console.log("CodeMirrorDictionariesLoader: Error while retrieving dictionaries data"),setTimeout(function(){document.dispatchEvent(new Event("CodeMirrorDictionariesReady"))},50))},r.prototype.retrieveData=function(e){var t=this,n=t.loading;t.urls[e]&&t.urls[e][n]&&t.urls[e][n].length?(t.myXHR=new XMLHttpRequest,t.myXHR.open("GET",t.urls[e][n],!0),t.myXHR.onload=function(){t.requestCallBack()},t.myXHR.send(null)):t.loadData()},s.typo=function(e,t,n){return!(!e||!o.typo[e])&&(!(t&&n&&n.length)||!(!(n=n.replace(/^\s*|\s*$/,"")).length||"function"!=typeof o.typo[e][t])&&o.typo[e][t](n))},t.exports=s},{"typo-js":3}],2:[function(e,t,n){},{}],3:[function(o,t,e){!function(g){!function(){var e;(e=function(e,i,o,s){s=s||{},this.dictionary=null,this.rules={},this.dictionaryTable={},this.compoundRules=[],this.compoundRuleCodes={},this.replacementTable=[],this.flags=s.flags||{},this.memoized={},this.loaded=!1;var a,l,u,c,t,n,d=this;function r(e,t){e=d._readFile(e,null,null==s?void 0:s.asyncLoad);null!=s&&s.asyncLoad?e.then(function(e){t(e)}):t(e)}function f(e){i=e,o&&h()}function p(e){o=e,i&&h()}function h(){for(d.rules=d._parseAFF(i),d.compoundRuleCodes={},a=0,u=d.compoundRules.length;a<u;a++){var e=d.compoundRules[a];for(l=0,c=e.length;l<c;l++)d.compoundRuleCodes[e[l]]=[]}for(a in"ONLYINCOMPOUND"in d.flags&&(d.compoundRuleCodes[d.flags.ONLYINCOMPOUND]=[]),d.dictionaryTable=d._parseDIC(o),d.compoundRuleCodes)0===d.compoundRuleCodes[a].length&&delete d.compoundRuleCodes[a];for(a=0,u=d.compoundRules.length;a<u;a++){var t=d.compoundRules[a],n="";for(l=0,c=t.length;l<c;l++){var r=t[l];r in d.compoundRuleCodes?n+="("+d.compoundRuleCodes[r].join("|")+")":n+=r}d.compoundRules[a]=new RegExp("^"+n+"$","i")}d.loaded=!0,null!=s&&s.asyncLoad&&null!=s&&s.loadedCallback&&s.loadedCallback(d)}return e&&(d.dictionary=e,i&&o?h():"undefined"!=typeof window&&(window.chrome||window.browser)?(t=(window.chrome&&window.chrome.runtime?window.chrome:browser).runtime,n=s.dictionaryPath||"typo/dictionaries",i||r(t.getURL(n+"/"+e+"/"+e+".aff"),f),o||r(t.getURL(n+"/"+e+"/"+e+".dic"),p)):(n=s.dictionaryPath||(void 0!==g?g+"/dictionaries":"./dictionaries"),i||r(n+"/"+e+"/"+e+".aff",f),o||r(n+"/"+e+"/"+e+".dic",p))),this}).prototype={load:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);return this},_readFile:function(e,t,n){var r,i;if(t=t||"utf8","undefined"!=typeof XMLHttpRequest)return(r=new XMLHttpRequest).open("GET",e,!!n),null!=(i=r.overrideMimeType)&&i.call(r,"text/plain; charset="+t),n?(i=new Promise(function(e,t){r.onload=function(){200===r.status?e(r.responseText):t(r.statusText)},r.onerror=function(){t(r.statusText)}}),r.send(null),i):(r.send(null),r.responseText);if(void 0!==o){n=o("fs");try{if(n.existsSync(e))return n.readFileSync(e,t);console.log("Path "+e+" does not exist.")}catch(e){console.log(e)}}return""},_parseAFF:function(e){for(var t,n={},r=e.split(/\r?\n/),i=0,o=r.length;i<o;i++)if(t=(t=this._removeAffixComments(r[i])).trim()){var s=t.split(/\s+/),a=s[0];if("PFX"===a||"SFX"===a){for(var l,u=s[1],c=s[2],d=[],f=i+1,p=i+1+(l=parseInt(s[3],10));f<p;f++){var h,g=(h=r[f].split(/\s+/))[2],m=h[3].split("/"),y=m[0],m=("0"===y&&(y=""),this.parseRuleCodes(m[1])),v=h[4],y={add:y};0<m.length&&(y.continuationClasses=m),"."!==v&&(y.match="SFX"===a?new RegExp(v+"$"):new RegExp("^"+v)),"0"!=g&&(y.remove="SFX"===a?new RegExp(g+"$"):g),d.push(y)}n[u]={type:a,combineable:"Y"===c,entries:d},i+=l}else if("COMPOUNDRULE"===a){for(p=(f=i+1)+(l=parseInt(s[1],10));f<p;f++)h=(t=r[f]).split(/\s+/),this.compoundRules.push(h[1]);i+=l}else"REP"===a?3===(h=t.split(/\s+/)).length&&this.replacementTable.push([h[1],h[2]]):this.flags[a]=s[1]}return n},_removeAffixComments:function(e){return e.match(/^\s*#/)?"":e},_parseDIC:function(e){var t=(e=this._removeDicComments(e)).split(/\r?\n/),n={};function r(e,t){n.hasOwnProperty(e)||(n[e]=null),0<t.length&&(null===n[e]&&(n[e]=[]),n[e].push(t))}for(var i=1,o=t.length;i<o;i++){var s=t[i];if(s){var s=s.split("/",2),a=s[0];if(1<s.length){var l=this.parseRuleCodes(s[1]);"NEEDAFFIX"in this.flags&&-1!==l.indexOf(this.flags.NEEDAFFIX)||r(a,l);for(var u=0,c=l.length;u<c;u++){var d=l[u],f=this.rules[d];if(f)for(var p=this._applyRule(a,f),h=0,g=p.length;h<g;h++){var m=p[h];if(r(m,[]),f.combineable)for(var y=u+1;y<c;y++){var v=l[y],v=this.rules[v];if(v&&v.combineable&&f.type!=v.type)for(var C=this._applyRule(m,v),R=0,w=C.length;R<w;R++)r(C[R],[])}}d in this.compoundRuleCodes&&this.compoundRuleCodes[d].push(a)}}else r(a.trim(),[])}}return n},_removeDicComments:function(e){return e=e.replace(/^\t.*$/gm,"")},parseRuleCodes:function(e){if(e){if("FLAG"in this.flags){if("long"!==this.flags.FLAG)return"num"===this.flags.FLAG?e.split(","):"UTF-8"===this.flags.FLAG?Array.from(e):e.split("");for(var t=[],n=0,r=e.length;n<r;n+=2)t.push(e.substr(n,2));return t}return e.split("")}return[]},_applyRule:function(e,t){for(var n=t.entries,r=[],i=0,o=n.length;i<o;i++){var s=n[i];if(!s.match||e.match(s.match)){var a=e;if(s.remove&&(a=a.replace(s.remove,"")),"SFX"===t.type?a+=s.add:a=s.add+a,r.push(a),"continuationClasses"in s)for(var l=0,u=s.continuationClasses.length;l<u;l++){var c=this.rules[s.continuationClasses[l]];c&&(r=r.concat(this._applyRule(a,c)))}}}return r},check:function(e){if(!this.loaded)throw"Dictionary not loaded.";if(e){e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(this.checkExact(e))return!0;if(e.toUpperCase()===e){var t=e[0]+e.substring(1).toLowerCase();if(this.hasFlag(t,"KEEPCASE"))return!1;if(this.checkExact(t))return!0;if(this.checkExact(e.toLowerCase()))return!0}t=e[0].toLowerCase()+e.substring(1);if(t!==e){if(this.hasFlag(t,"KEEPCASE"))return!1;if(this.checkExact(t))return!0}}return!1},checkExact:function(e){if(!this.loaded)throw"Dictionary not loaded.";var t,n,r=this.dictionaryTable[e];if(void 0===r){if("COMPOUNDMIN"in this.flags&&e.length>=this.flags.COMPOUNDMIN)for(t=0,n=this.compoundRules.length;t<n;t++)if(e.match(this.compoundRules[t]))return!0}else{if(null===r)return!0;if("object"==typeof r)for(t=0,n=r.length;t<n;t++)if(!this.hasFlag(e,"ONLYINCOMPOUND",r[t]))return!0}return!1},hasFlag:function(e,t,n){if(this.loaded)return!!(t in this.flags&&(n=void 0===n?Array.prototype.concat.apply([],this.dictionaryTable[e]):n)&&-1!==n.indexOf(this.flags[t]));throw"Dictionary not loaded."},alphabet:"",suggest:function(e,c){if(!this.loaded)throw"Dictionary not loaded.";if(c=c||5,this.memoized.hasOwnProperty(e)){var t=this.memoized[e].limit;if(c<=t||this.memoized[e].suggestions.length<t)return this.memoized[e].suggestions.slice(0,c)}if(this.check(e))return[];for(var n=0,r=this.replacementTable.length;n<r;n++){var i=this.replacementTable[n];if(-1!==e.indexOf(i[0])){i=e.replace(i[0],i[1]);if(this.check(i))return[i]}}if(!this.alphabet){this.alphabet="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ","TRY"in this.flags&&(this.alphabet+=this.flags.TRY),"WORDCHARS"in this.flags&&(this.alphabet+=this.flags.WORDCHARS);for(var o=this.alphabet.split(""),s=(o.sort(),{}),n=0;n<o.length;n++)s[o[n]]=!0;for(n in this.alphabet="",s)this.alphabet+=n}var f=this;function d(e,t){var n,r,i,o,s={},a=f.alphabet.length;for(o in e)for(n=0,r=o.length+1;n<r;n++){var l=[o.substring(0,n),o.substring(n)];if(l[1]&&(i=l[0]+l[1].substring(1),t&&!f.check(i)||(i in s?s[i]+=1:s[i]=1)),1<l[1].length&&l[1][1]!==l[1][0]&&(i=l[0]+l[1][1]+l[1][0]+l[1].substring(2),t&&!f.check(i)||(i in s?s[i]+=1:s[i]=1)),l[1])for(var u=l[1].substring(0,1).toUpperCase()===l[1].substring(0,1)?"uppercase":"lowercase",c=0;c<a;c++){var d=f.alphabet[c];(d="uppercase"===u?d.toUpperCase():d)!=l[1].substring(0,1)&&(i=l[0]+d+l[1].substring(1),t&&!f.check(i)||(i in s?s[i]+=1:s[i]=1))}if(l[1])for(c=0;c<a;c++){u=l[0].substring(-1).toUpperCase()===l[0].substring(-1)&&l[1].substring(0,1).toUpperCase()===l[1].substring(0,1)?"uppercase":"lowercase",d=f.alphabet[c];"uppercase"===u&&(d=d.toUpperCase()),i=l[0]+d+l[1],t&&!f.check(i)||(i in s?s[i]+=1:s[i]=1)}}return s}return this.memoized[e]={suggestions:(e=>{var t,n,r=d(((t={})[e]=!0,t)),i=d(r,!0);for(n in r)f.check(n)&&(n in i?i[n]+=r[n]:i[n]=r[n]);var o=[];for(u in i)i.hasOwnProperty(u)&&o.push([u,i[u]]);o.sort(function(e,t){var n=e[1],r=t[1];return n<r?-1:r<n?1:t[0].localeCompare(e[0])}).reverse();for(var s=[],a="lowercase",l=(e.toUpperCase()===e?a="uppercase":e.substr(0,1).toUpperCase()+e.substr(1).toLowerCase()===e&&(a="capitalized"),c),u=0;u<Math.min(l,o.length);u++)"uppercase"===a?o[u][0]=o[u][0].toUpperCase():"capitalized"===a&&(o[u][0]=o[u][0].substr(0,1).toUpperCase()+o[u][0].substr(1)),f.hasFlag(o[u][0],"NOSUGGEST")||-1!==s.indexOf(o[u][0])?l++:s.push(o[u][0]);return s})(e),limit:c},this.memoized[e].suggestions}},void 0!==t&&(t.exports=e)}.call(this)}.call(this,"/node_modules/typo-js")},{fs:2}]},{},[1])(1)});